# TIL Template

## ë‚ ì§œ: 2024-07-17

## Daily Scrum
- í”„ë¡œì íŠ¸ ì •ë¦¬ ( í¬íŠ¸í´ë¦¬ì˜¤ )
- mk 2ì°¨ QA í”¼ë“œë°±
- 9ì£¼ì°¨ ê³¼ì œ
- spring ê¹€ì˜í•œ
- ì½”í…Œ ë¬¸ì œ

## Today I Learned

## APACHE
- ncsa, httpd ì˜ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ê³  ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì—¬ë§Œë“  ì›¹ì„œë²„
- í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì»¤ë„¥ì…˜ì„ ë§Œë“ ë‹¤.
- í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“œëŠ” ì‹œê°„ì´ ì˜¤ëž˜ê±¸ë ¤ ë¯¸ë¦¬ ìš”ì²­ì´ ë“¤ì–´ì˜¤ê¸° ì „ì— í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë†“ëŠ” prefork ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.
- ì´ëŸ¬í•œ ê°œë°œêµ¬ì¡°ëŠ” í™•ìž¥ì„±ê³¼ ë‹¤ì–‘í•œ ëª¨ë“ˆì„ ë§Œë“¤ì–´ ì„œë²„ì— ë¹ ë¥´ê²Œ ê¸°ëŠ¥ë„ ì¶”ê°€í•˜ê¸° ì¢‹ê³  ìš”ì²­ì„ ë°›ê³  ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì„ í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ì²˜ë¦¬í•˜ê¸° ì¢‹ì•˜ë‹¤.

### ë‹¨ì 

- ì¸í„°ë„· íŠ¸ëž˜í”½ì´ ì ì  ëŠ˜ì–´ë‚˜ë©´ì„œ ìš”ì²­ì´ ë§Žì•„ì§€ë‹¤ ë³´ë‹ˆ ë”ì´ìƒ ì„œë²„ì— ì»¤ë„¥ì…˜ì„ í˜•ì„±í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒ C10K(Connection 10000ê°œ)
    - ë™ì‹œì— ì—°ê²°ëœ ì»¤ë„¥ì…˜ ìˆ˜
        - ìš”ì²­ì„ ì²˜ë¦¬í•˜ê¸° ìš°í•´ ì„œë²„ê°€ í•œ ì‹œì ì— ì–¼ë§ˆë‚˜ ë§Žì€ í´ë¼ì´ì–¸íŠ¸ì™€ ì»¤ë„¥ì…˜ì„ í˜•ì„±í•˜ëŠ”ì§€
        - í•˜ë‚˜ì˜ í´ë¼ì´ì–¸íŠ¸ëŠ” í•˜ë‚˜ì˜ ì»¤ë„¥ì…˜ì„ ì´ìš©í•´ì„œ ì—¬ëŸ¬ ìš”ì²­ì„ ë³´ë‚´ê¸° ê°€ëŠ¥
        - í•˜ë‚˜ì˜ ì»¤ë„¥ì…˜ì´ ê¸´ ì‹œê°„ë™ì•ˆ ìœ ì§€ë  ìˆ˜ ìžˆë‹¤.
    - ì´ˆë‹¹ ìš”ì²­ ì²˜ë¦¬ ìˆ˜
        - ì„œë²„ê°€ ì–¼ë§ˆë‚˜ ë¹¨ë¦¬ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìžˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì§€í‘œ
- í•˜ë“œì›¨ì–´ì ì¸ ë¬¸ì œëŠ” ì—†ì—ˆì§€ë§Œ, ì•„íŒŒì¹˜ ì„œë²„ êµ¬ì¡° ìžì²´ì˜ ë¬¸ì œë¡œ ì•„íŒŒì¹˜ ì„œë²„ì—ì„œ ì»¤ë„¥ì…˜ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ í”„ë¡œì„¸ìŠ¤ê°€ í• ë‹¹ë˜ëŠ”ë° ì´ëŠ” ë©”ëª¨ë¦¬ ë¶€ì¡±ìœ¼ë¡œ ì´ì–´ì§€ê³ , í”„ë¡œì„¸ìŠ¤ê°€ ëŠ˜ì–´ë‚¨ì— ë”°ë¼ ë¦¬ì†ŒìŠ¤ ì–‘ì´ ì¦ê°€í–ˆë‹¤.
ë˜í•œ ë§Žì€ ì»¤ë„¥ì…˜ì´ ë“¤ì–´ì˜¤ë©´ CPUì½”ì–´ëŠ” ê³„ì†í•´ì„œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë°”ê¿”ê°€ë©´ì„œ ì¼ì„í•´ì•¼í•´ì„œ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì´ ì¦ê°€í•˜ê³  cpu ë¶€í•˜ê°€ ì‹¬í•´ì¡Œë‹¤.
- ê²°ë¡ ì ìœ¼ë¡œ ë§Žì€ ìˆ˜ì˜ ë™ì‹œ ì»¤ë„¥ì…˜ì„ ê°ë‹¹í•˜ê¸°ì—ëŠ” ì•„íŒŒì¹˜ì„œë²„ êµ¬ì¡°ê°€ ë¶€ì í•©í•˜ë‹¤. ì´ëŸ¬í•œ êµ¬ì¡°ì ì¸ ë¬¸ì œë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ì„œ Nginxê°€ ë‘ê°ì„ ë“œëŸ¬ëƒˆë‹¤.

# Nginx

- **Nginx :** ë†’ì€ ì„±ëŠ¥ê³¼ ì•ˆì •ì„±ì„ ê°€ì§€ê³  ê°€ìž¥ ë§Žì´ ì‚¬ìš©ë˜ê³  ìžˆëŠ” ì›¹ì„œë²„
- ì•„íŒŒì¹˜ì™€ ê°™ì€ ì›¹ ì„œë²„ì™€ ë¹„êµí•˜ë©´ ë” ë¹ ë¥´ê³  ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ ì²˜ë¦¬ì— ì í•©
- Reverse Proxy Serverë¡œ í™œìš©í•˜ì—¬ WAS ì„œë²„ì˜ ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ ìžˆëŠ” ë¡œë“œë°¸ëŸ°ì„œë¡œë„ í™œìš©

## Nginx ì˜ íë¦„

- ì •ì  íŒŒì¼ì— ëŒ€í•œ ìš”ì²­ì„ ë°”ë¡œ ìŠ¤ìŠ¤ë¡œ ì²˜ë¦¬í•˜ê³  ë™ì  íŒŒì¼ì— ëŒ€í•œ ìš”ì²­ì„ ë°›ì•˜ì„ ë•Œë§Œ ë’¤ì— ì„œë²„ì™€ ì»¤ë„¥ì…˜ì„ ë§Œë“ ë‹¤.
- Master Processê°€ ì¡´ìž¬í•˜ì—¬ Master Processì—ì„œ ì„¤ì •íŒŒì¼ì„ ì½ê³  ê·¸ ì„¤ì •ì— ë§žê²Œ worker processë¥¼ ìƒì„±.
- ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤ì§ˆì ì¸ ì¼ì„í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì´ê³  ë§Œë“¤ì–´ì§ˆ ë•Œ ê°ìž ì§€ì •ëœ listen ì†Œì¼“ì„ ë°°ì •ë°›ê³  ì†Œì¼“ì„ í†µí•´ ìƒˆë¡œìš´ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì»¤ë„¥ì…˜ì„ ìƒì„±í•˜ê³  ìš”ì²­ì„ ì²˜ë¦¬.
- Nginxì—ì„œëŠ” ì»¤ë„¥ì…˜ í˜•ì„±, ì œê±° ê·¸ë¦¬ê³  ìƒˆë¡œìš´ ìš”ì²­ì˜ ì²˜ë¦¬ë¥¼ ì´ë²¤íŠ¸ë¼ê³  ë¶€ë¥¸ë‹¤.
- ì´ë²¤íŠ¸ë“¤ì€ OS ì»¤ë„ì´ í í˜•ì‹ìœ¼ë¡œ ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ì „ë‹¬í•´ì¤€ë‹¤.
- ê°ê°ì˜ ì´ë²¤íŠ¸ëŠ” íì— ë‹´ê¸´ ìƒíƒœë¡œ ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ê°€ ì²˜ë¦¬í•  ë•Œê¹Œì§€ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ëŒ€ê¸°í•œë‹¤.


## Nginxì˜ êµ¬ì¡°

- **Event - Driven êµ¬ì¡°** í•˜ë‚˜ì˜ Master Processì™€ ë‹¤ìˆ˜ì˜ Worker Processë¡œ êµ¬ì„±ë˜ì–´ ì‹¤í–‰ëœë‹¤. Master ProcessëŠ” ì„¤ì • íŒŒì¼(worker processì˜ ê°œìˆ˜ ë“±)ì„ ì½ê³ , ìœ íš¨ì„±ì„ ê²€ì‚¬ ë° Worker Processë¥¼ ê´€ë¦¬í•˜ë©° ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ìš”ì²­ë“¤ì„ Concurrencyí•˜ê²Œ ì²˜ë¦¬.
- ëª¨ë“  ìš”ì²­ì€ Worker Processì—ì„œ ì²˜ë¦¬í•˜ë©° Worker Process ì‚¬ì´ì— ìš”ì²­ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë¶„ë°°í•˜ê¸° ìœ„í•´ OSì— ì˜ì¡´ì ì´ë‹¤.
- ìƒˆë¡œìš´ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë”ë¼ë„ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì ì€ ìžì›ìœ¼ë¡œë„ íš¨ìœ¨ì ìœ¼ë¡œ ìš´ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
- Worker ProcessëŠ” ë³´í†µ cpuì˜ ì½”ì–´ ìˆ˜ ë§Œí¼ ìƒì„±ë˜ëŠ”ë°, ì½”ì–´ê°€ ë‹´ë‹¹í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ëŒ€í­ ì¤„ ìˆ˜ ìž‡ì–´. CPUì˜ ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ì„ ëŒ€í­ ì¤„ì—¬ ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ ìžˆë‹¤. (ì•„íŒŒì¹˜ì™€ ê°€ìž¥ í° ì°¨ì´ì )

## Nginxì˜ ë¶€ê°€ê¸°ëŠ¥

- ì›¹ì„œë²„, ë¡œë“œë°¸ëŸ°ì„œëŠ” ê¸°ë³¸
- ì›¹ì„œë²„ ê°€ì†ê¸°ë¡œ ì´ìš©ê°€ëŠ¥
- SSL í„°ë¯¸ë„¤ì´ì…˜ ( í´ë¼ì´ì–¸íŠ¸ì™€ëŠ” https, ì›¹ì„œë²„ì™€ëŠ” http í†µì‹ í•˜ì—¬ ë¶€í•˜ë¥¼ ì¤„ì¼ ìˆ˜ ìžˆë‹¤)
- HTTPí”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ì „ë‹¬í•˜ëŠ” ì»¨í…ì¸ ë¥¼ ìºì‹±í•  ìˆ˜ ìžˆë‹¤.
- HSTS
- CORS ì²˜ë¦¬
- TCP/UDP ì»¤ë„¥ì…˜ ë¶€í•˜ë¶„ì‚°
- HTTP/2 ì§€ì›

### Reference
- https://www.youtube.com/watch?v=6FAwAXXj5N0
- [https://velog.io/@wijihoon123/Nginxëž€-ë¬´ì—‡ì¸ê°€](https://velog.io/@wijihoon123/Nginx%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)
- [https://nginx.org/en/](https://blog.nginx.org/)

## ðŸŽ±ì˜¤ëŠ˜ì˜ íšŒê³ 
- ì˜¤ëŠ˜ì€ ë¹„ê°€ ë§Žì´ì™€ì„œ ì •ë§ í”¼ê³¤í•˜ê³  ì¶•ì¶• ì²˜ì§€ëŠ” ë‚ ì´ì˜€ë‹¤. ìš°í…Œì½” ìœ íŠœë¸Œì— ë‚˜ì˜¤ëŠ” ê¸°ìˆ ì„¤ëª…ì´ ì€ê·¼ìž¬ë°Œê³  í¥ë¯¸ë¡œì›Œì„œ ë³´ë©´ì„œ csë¥¼ ë‹¤ì ¸ë„ ì¢‹ì„ ê²ƒ ê°™ë‹¤. 

> [!NOTE]



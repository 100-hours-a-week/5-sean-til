# TIL Template

## ë‚ ì§œ: 2024 06 03
### ìŠ¤í¬ëŸ¼
- 8ì£¼ì°¨ 1, 2 ì œì¶œ
- 8ì£¼ì°¨ ê³¼ì œ

### ìƒˆë¡œ ë°°ìš´ ë‚´ìš©
#### ì£¼ì œ : mysql nodejs ì—°ë™ ì˜¤ë¥˜ í•´ê²°ë²•
<aside>
ğŸ’¡ Mysql ì„ expressì— ì—°ê²°í•˜ë ¤ëŠ” ë„ì¤‘ ê³„ì† ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤.

</aside>

## ìƒí™© ê³µìœ 

1. ë°±ì—”ë“œ ì„œë²„ ë™ì‘ì‹œ ì˜¤ë¥˜

ë°±ì—”ë“œ ì„œë²„ ì˜¤ë¥˜ ë‚´ìš©

```python
node ba-server.js
__dirname is: /Users/junho/Desktop/startupcode/git/grulla79/5-sean-kim-kks-community/back
Server is running on port 3001
mysql connection error : Error: ER_ACCESS_DENIED_NO_PASSWORD_ERROR: Access denied for user 'junho'@'localhost'
```

ë°±ì—”ë“œ ì„œë²„ ì˜¤ë¥˜ ë‚´ìš© ( root ê³„ì • )

```python
code: 'ER_ACCESS_DENIED_NO_PASSWORD_ERROR',
  errno: 1698,
  sqlMessage: "Access denied for user 'root'@'localhost'",
  sqlState: '28000',
  fatal: true
```

## ë‹µë³€ ë‚´ìš©

### í•´ê²°ë°©ë²•

1. í„°ë¯¸ë„ì—ì„œ 3306 í¬íŠ¸ í™•ì¸

```sql
lsof -i :3306
COMMAND    PID  USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
mariadbd 32140 junho   25u  IPv6 0xb2683971e1410965      0t0  TCP *:mysql (LISTEN)
mariadbd 32140 junho   26u  IPv4 0xb268395eafcae705      0t0  TCP *:mysql (LISTEN)
mysqld   64365 junho   21u  IPv4 0xb268395eaf74374d      0t0  TCP localhost:mysql (LISTEN)
mysqld   64365 junho   33u  IPv4 0xb268395eafcd7df5      0t0  TCP localhost:mysql->localhost:55536 (ESTABLISHED)
mysql    66038 junho    3u  IPv4 0xb268395eafde82c5      0t0  TCP localhost:55536->localhost:mysql (ESTABLISHED)
```

ì‚­ì œí–ˆë˜ mariadbê°€ ì‚´ì•„ìˆê³  mysqlê³¼ ë™ì‹œì— ì‘ë™í•˜ê³  ìˆëŠ” ëª¨ìŠµ

1. í„°ë¯¸ë„ì—ì„œ mysql ë¥¼ ì¤‘ì§€ ì‹œí‚¤ê¸°.

> brew services stop mysql

> mysql.server stop

â‡’ ë‘˜ ì¤‘ ì–´ëŠ ê²ƒì¸ì§€ ëª°ë¼ ë‘˜ ë‹¤ ì¤‘ì§€

1. 3306 í¬íŠ¸ ì‚¬ìš©í•˜ê³  ì‡ëŠ” command ì£½ì´ê¸°

```python
> kill -9 32140

> kill -9 66038
```

![4](https://github.com/100-hours-a-week/sean-til/assets/122856840/ab801843-f147-43a4-aa34-b665c725217b)

ê¹”ë”í•´ì§„ ëª¨ìŠµ

1. ì´í›„ ë‹¤ì‹œ ì‹¤í–‰

```python
> mysql.server start

> brew services start mysql
```

![3](https://github.com/100-hours-a-week/sean-til/assets/122856840/af736ebc-6d4b-40d1-9099-d2c60a8fe5de)

1. ì´í›„ vscodeë¡œ ë°±ì—”ë“œ ì„œë²„ë¥¼ ì‹¤í–‰ì‹œì¼œë³´ë‹ˆ ë‹¤ë¥¸ ì—ëŸ¬ê°€ ë‚˜ì™”ë‹¤.

```python
node ba-server.js
__dirname is: /Users/junho/Desktop/startupcode/git/grulla79/5-sean-kim-kks-community/back
Server is running on port 3001
mysql connection error : Error: ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested by server; consider upgrading MySQL client
```

ìœ„ ì˜¤ë¥˜ë¥¼ ê²€ìƒ‰í•´ë³´ë‹ˆ 

ì›ë˜ mysqlì˜ default_authentication_plugin(ê¸°ë³¸ ì¸ì¦ í”ŒëŸ¬ê·¸ì¸)ì€ mysql_native password ì´ì—ˆëŠ”ë° mysql8 ë¶€í„° ë³´ì•ˆì´ ê°•í™”ëœ caching_sha2_passwordë¡œ ë³€ê²½ë˜ë©´ì„œ ë¬¸ì œê°€ ìƒê²¼ë‹¤ê³  í•©ë‹ˆë‹¤.

ì´ë•Œ Mysql í´ë¼ì´ì–¸íŠ¸ê°€ ì•„ì§ caching_sha2_password ë°©ì‹ì„ ì§€ì›í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš° ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ê³  í•©ë‹ˆë‹¤.

ì¦‰ Node.js ì˜ mysql ëª¨ë“ˆì´ caching_sha2_password ë°©ì‹ì„ ì§€ì›í•˜ì§€ ëª»í•´ì„œ ìƒê¸°ëŠ” ì—ëŸ¬.

ì œ ë…¸ë“œ ë²„ì „ì€ v21.7.2 ì…ë‹ˆë‹¤.

1. 5ë²ˆ ì˜¤ë¥˜ëŠ” ì•„ë˜ ë§í¬ ë¸”ë¡œê·¸ë¥¼ í†µí•´ í•´ê²°í–ˆë‹¤. ë‘ ê°€ì§€ ë°©ë²•ì¤‘ í•˜ë‚˜ë§Œ ë³´ìë©´

[[Node.js] MySQL ì—°ê²°ì‹œ ER_NOT_SUPPORTED_AUTH_MODE ì—ëŸ¬ ì›ì¸ê³¼ í•´ê²°ë²•](https://sirius7.tistory.com/52)

- user plugin í™•ì¸

![2](https://github.com/100-hours-a-week/sean-til/assets/122856840/6861ed60-0c69-4205-b8d2-383effb20b52)
![1](https://github.com/100-hours-a-week/sean-til/assets/122856840/f2d7189b-c0c4-48da-9e7b-4025925aed7b)

plugin ì„ í™•ì¸í•´ë³´ë©´ ì €ëŠ” ì§€ê¸ˆ ë°”ê¿”ë†¨ì§€ë§Œ ì›ë˜ caching_sha2_password ì˜€ìŠµë‹ˆë‹¤.

plugin ì„ mysql_native_password ë¡œ ë°”ê¿”ì£¼ê³  ë°±ì—”ë“œ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë©´

```sql
ALTER USER 'ì•„ì´ë””'@'ì£¼ì†Œ' IDENTIFIED WITH mysql_native_password BY 'ë¹„ë°€ë²ˆí˜¸';
```

![Untitled](https://github.com/100-hours-a-week/sean-til/assets/122856840/35c26450-ad0f-49aa-ad0c-21f1d16d7f9c)
í•´ê²°

### ì˜¤ëŠ˜ì˜ íšŒê³ 
- ì˜¤ëŠ˜ 8ì£¼ì°¨ 3ë²ˆê³¼ì œê¹Œì§€ ëëƒˆë‹¤. ë‚´ì¼ ìŠ¤í”„ë§ì¸ë° ì¼ì° ìì•¼ê² ë‹¤.
### ì°¸ê³  ìë£Œ ë° ë§í¬
-https://velog.io/@grulla7999/MySQL-NodeJS-%EC%97%B0%EB%8F%99-%EC%98%A4%EB%A5%98

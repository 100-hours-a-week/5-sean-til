# TIL Template

## 날짜: 2024-08-27

## Daily Scrum
- 3차 스프린트 백로그 작성
- webSocket 공부

## Today I Learned

## Stomp ( Simple Text Oriented Messaging Protocol )

### stomp 가 없다면

- 기본적으로 웹소켓만을 사용한 통신은 메세지를 주고받는 형식이 정해져 있지 않다. 정의된 메세지 형식대로 파싱 하는 로직 또한 따로 구현해야한다.
- 그리고 발신자와 수신자를 Spring단에서 직접 관리해야한다.  사용자를 Map으로 관리하며 클라이언트에서 들어오는 메세지를 다른 사용자들에게 전달하는 코드를 직접 구현해야한다.

### stomp 를 활용한다면

- 메세지 브로커를 활용하여 쉽게 메세지를 주고받을 수 있다. pub-sub(발행-구독) 방식으로 동작하며, 이 방식은 발신자가 메세지를 발행하면 수신자가 그것을 수신하는 메세징 패러다임이다.
- stomp는 웹소켓 위에 얹어 함께 사용 가능한 하위 프로토콜이다.
- 메세지 형식이 정해져있으며, pub/sub 방식으로 동작하여 추가적인 코드 없이 @MessagingMapping을 사용하여 쉽게 메세지 전송, 수신이 가능하다.
- 채팅방을 생성하면 Topic 이 생성되며 이 Topic 마다 채팅창이 구분된다. 해당 Topic을 구독(sub)하면 웹 소켓이 연결되어 있는 동안 채팅창을 지속적으로 확인가능하다.
- 새로운 채팅인 송신(pub)되면 구독한 사람들에게만 메세지를 전달해주면 되기 때문에 더 쉬워진다.

## webSocket 동시성 문제
- 오늘 원래 여행 방 내 기능인 여행 일정을 websocket을 사용해서 동시성문제를 해결하고 사용자들끼리 서로 일정을 실시간으로 공유할 수 있도록 하려고 했다.
- 하지만 webSocket을 이용한다고 동시성문제를 완전히 해결할 수는 없다. 자세한 내용은 ckns - bug tracking

## 🎱오늘의 회고
- 오늘은 백로그 작성을 완전히 다 깔끔하게 하지는 못한 것 같다. 그리고 채팅 기능을 적용하려는데 우리 서비스에 맞게 적용하려는데 공부하려면 조금 시간이 걸릴 것 같다.
- 우리 팀은 백/프론트끼리 이야기하고 정리한다음 이야기를 공유하는 것이 아니라 한 주제에 대해 모든 팀원이 달라붙어서 이야기를 서로 공유하는 문화인데, 단점을 오늘 발견했다. 배포가 급한 상황에 백은 배포까지의 개발은 완료한 상태이고, 프론트는 아직 개발중인 상황에서 스프린트 3 기능에 대해서 백엔드에 대한 기능을 얘기하고 있었는데, 프론트는 아직 개발을 끝내지 않은 상황에서 서로 이후 스프린트3 기능에 대한 이야기를 공유하고 이야기 하다보니 시간이 너무 지체되고 효율이 떨어진다는 느낌을 받았다. 이 부분은 개선해야될 것 같다.

## Reference
- 


